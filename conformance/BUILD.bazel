sh_test(
    name = "ct",
    srcs = ["@com_google_cel_spec//tests:conftest.sh"],
    args = [
        "$(location @com_google_cel_spec//tests/simple:simple_test)",
        "--server=$(location //server/main:cel_server)",
        "$(location @com_google_cel_spec//tests/simple:testdata/plumbing.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/basic.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/comparisons.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/fields.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/fp_math.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/integer_math.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/lists.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/logic.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/macros.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/string.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/timestamps.textproto)",
    ],
    data = [
        "@com_google_cel_spec//tests/simple:simple_test",
        "//server/main:cel_server",
        "@com_google_cel_spec//tests/simple:testdata/plumbing.textproto",
        "@com_google_cel_spec//tests/simple:testdata/basic.textproto",
        "@com_google_cel_spec//tests/simple:testdata/comparisons.textproto",
        "@com_google_cel_spec//tests/simple:testdata/fields.textproto",
        "@com_google_cel_spec//tests/simple:testdata/fp_math.textproto",
        "@com_google_cel_spec//tests/simple:testdata/integer_math.textproto",
        "@com_google_cel_spec//tests/simple:testdata/lists.textproto",
        "@com_google_cel_spec//tests/simple:testdata/logic.textproto",
        "@com_google_cel_spec//tests/simple:testdata/macros.textproto",
        "@com_google_cel_spec//tests/simple:testdata/string.textproto",
        "@com_google_cel_spec//tests/simple:testdata/timestamps.textproto",
    ],
)

# ct_dashboard is a target for the conformance dashboard and includes all simple textproto files, including those that are broken.
sh_test(
    name = "ct_dashboard",
    srcs = ["@com_google_cel_spec//tests:conftest-nofail.sh"],
    args = [
        "$(location @com_google_cel_spec//tests/simple:simple_test)",
        "--server=$(location //server/main:cel_server)",
        "-test.v",
        "$(location @com_google_cel_spec//tests/simple:testdata/plumbing.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/basic.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/broken.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/comparisons.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/fields.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/fp_math.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/integer_math.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/lists.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/logic.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/macros.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/string.textproto)",
        "$(location @com_google_cel_spec//tests/simple:testdata/timestamps.textproto)",
    ],
    data = [
        "@com_google_cel_spec//tests/simple:simple_test",
        "//server/main:cel_server",
        "@com_google_cel_spec//tests/simple:testdata/plumbing.textproto",
        "@com_google_cel_spec//tests/simple:testdata/basic.textproto",
        "@com_google_cel_spec//tests/simple:testdata/broken.textproto",
        "@com_google_cel_spec//tests/simple:testdata/comparisons.textproto",
        "@com_google_cel_spec//tests/simple:testdata/fields.textproto",
        "@com_google_cel_spec//tests/simple:testdata/fp_math.textproto",
        "@com_google_cel_spec//tests/simple:testdata/integer_math.textproto",
        "@com_google_cel_spec//tests/simple:testdata/lists.textproto",
        "@com_google_cel_spec//tests/simple:testdata/logic.textproto",
        "@com_google_cel_spec//tests/simple:testdata/macros.textproto",
        "@com_google_cel_spec//tests/simple:testdata/string.textproto",
        "@com_google_cel_spec//tests/simple:testdata/timestamps.textproto",
    ],
)

