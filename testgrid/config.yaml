# Copyright 2019 The Knative Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# Default testgroup and dashboardtab, please do not change them
default_test_group:
  days_of_results: 14            # Number of days of test results to gather and serve
  tests_name_policy: 2           # Replace the name of the test
  ignore_pending: false          # Show in-progress tests
  column_header:
  - configuration_value: Commit  # Shows the commit number on column header
  num_columns_recent: 10         # The number of columns to consider "recent" for a variety of purposes
  use_kubernetes_client: true    # ** This field is deprecated and should always be true **
  is_external: true              # ** This field is deprecated and should always be true **
  alert_stale_results_hours: 26  # Alert if tests haven't run for a day (1 day + 2h)
  num_failures_to_alert: 1       # Alert for every failure
  num_passes_to_disable_alert: 1 # Consider a failing test passing if it has 1 or more consecutive passes
default_dashboard_tab:
  open_test_template:            # The URL template to visit after clicking on a cell
    url: https://prow.knative.dev/view/gcs/<gcs_prefix>/<changelist>
  file_bug_template:             # The URL template to visit when filing a bug
    url: https://github.com/knative/serving/issues/new
    options:
    - key: title
      value: "Test \"<test-name>\" failed"
    - key: body
      value: <test-url>
  attach_bug_template:           # The URL template to visit when attaching a bug
    url:                         # Empty
    options:                     # Empty
  # Text to show in the about menu as a link to another view of the results
  results_text: See these results on Prow
  results_url_template:          # The URL template to visit after clicking
    url: https://prow.knative.dev/job-history/<gcs_prefix>
  # URL for regression search links.
  code_search_path: github.com/knative/serving/search
  num_columns_recent: 10
  code_search_url_template:      # The URL template to visit when searching for changelists
    url: https://github.com/knative/serving/compare/<start-custom-0>...<end-custom-0>
  alert_options:
    alert_mail_to_addresses: "victoriajyang@google.com"
test_groups:
- name: ci-knative-serving-continuous
  gcs_prefix: knative-prow/logs/ci-knative-serving-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-istio-1.0-mesh
  gcs_prefix: knative-prow/logs/ci-knative-serving-istio-1.0-mesh
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-istio-1.0-no-mesh
  gcs_prefix: knative-prow/logs/ci-knative-serving-istio-1.0-no-mesh
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-istio-1.1-mesh
  gcs_prefix: knative-prow/logs/ci-knative-serving-istio-1.1-mesh
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-istio-1.1-no-mesh
  gcs_prefix: knative-prow/logs/ci-knative-serving-istio-1.1-no-mesh
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-istio-1.2-mesh
  gcs_prefix: knative-prow/logs/ci-knative-serving-istio-1.2-mesh
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-istio-1.2-no-mesh
  gcs_prefix: knative-prow/logs/ci-knative-serving-istio-1.2-no-mesh
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-nightly-release
  gcs_prefix: knative-prow/logs/ci-knative-serving-nightly-release
- name: ci-knative-serving-dot-release
  gcs_prefix: knative-prow/logs/ci-knative-serving-dot-release
  alert_stale_results_hours: 170
- name: ci-knative-serving-auto-release
  gcs_prefix: knative-prow/logs/ci-knative-serving-auto-release
  alert_stale_results_hours: 3
- name: ci-knative-serving-latency
  gcs_prefix: knative-prow/logs/ci-knative-serving-latency
  short_text_metric: "latency"
- name: ci-knative-serving-performance
  gcs_prefix: knative-prow/logs/ci-knative-serving-performance
  short_text_metric: "perf_latency"
- name: ci-knative-serving-performance-mesh
  gcs_prefix: knative-prow/logs/ci-knative-serving-performance-mesh
  short_text_metric: "perf_latency"
- name: pull-knative-serving-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-serving-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-build-continuous
  gcs_prefix: knative-prow/logs/ci-knative-build-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-build-nightly-release
  gcs_prefix: knative-prow/logs/ci-knative-build-nightly-release
- name: ci-knative-build-dot-release
  gcs_prefix: knative-prow/logs/ci-knative-build-dot-release
  alert_stale_results_hours: 170
- name: ci-knative-build-auto-release
  gcs_prefix: knative-prow/logs/ci-knative-build-auto-release
  alert_stale_results_hours: 3
- name: ci-knative-build-latency
  gcs_prefix: knative-prow/logs/ci-knative-build-latency
  short_text_metric: "latency"
- name: pull-knative-build-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-build-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-client-continuous
  gcs_prefix: knative-prow/logs/ci-knative-client-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-client-nightly-release
  gcs_prefix: knative-prow/logs/ci-knative-client-nightly-release
- name: ci-knative-client-dot-release
  gcs_prefix: knative-prow/logs/ci-knative-client-dot-release
  alert_stale_results_hours: 170
- name: ci-knative-client-auto-release
  gcs_prefix: knative-prow/logs/ci-knative-client-auto-release
  alert_stale_results_hours: 3
- name: pull-knative-client-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-client-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-docs-continuous
  gcs_prefix: knative-prow/logs/ci-knative-docs-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: pull-knative-docs-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-docs-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-eventing-continuous
  gcs_prefix: knative-prow/logs/ci-knative-eventing-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-eventing-nightly-release
  gcs_prefix: knative-prow/logs/ci-knative-eventing-nightly-release
- name: ci-knative-eventing-dot-release
  gcs_prefix: knative-prow/logs/ci-knative-eventing-dot-release
  alert_stale_results_hours: 170
- name: ci-knative-eventing-auto-release
  gcs_prefix: knative-prow/logs/ci-knative-eventing-auto-release
  alert_stale_results_hours: 3
- name: ci-knative-eventing-performance
  gcs_prefix: knative-prow/logs/ci-knative-eventing-performance
  short_text_metric: "perf_latency"
- name: pull-knative-eventing-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-eventing-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-eventing-contrib-continuous
  gcs_prefix: knative-prow/logs/ci-knative-eventing-contrib-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-eventing-contrib-nightly-release
  gcs_prefix: knative-prow/logs/ci-knative-eventing-contrib-nightly-release
- name: ci-knative-eventing-contrib-dot-release
  gcs_prefix: knative-prow/logs/ci-knative-eventing-contrib-dot-release
  alert_stale_results_hours: 170
- name: ci-knative-eventing-contrib-auto-release
  gcs_prefix: knative-prow/logs/ci-knative-eventing-contrib-auto-release
  alert_stale_results_hours: 3
- name: pull-knative-eventing-contrib-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-eventing-contrib-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-build-templates-continuous
  gcs_prefix: knative-prow/logs/ci-knative-build-templates-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-pkg-continuous
  gcs_prefix: knative-prow/logs/ci-knative-pkg-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: pull-knative-pkg-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-pkg-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-caching-continuous
  gcs_prefix: knative-prow/logs/ci-knative-caching-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: pull-knative-caching-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-caching-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-observability-continuous
  gcs_prefix: knative-prow/logs/ci-knative-observability-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-sample-controller-continuous
  gcs_prefix: knative-prow/logs/ci-knative-sample-controller-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-test-infra-continuous
  gcs_prefix: knative-prow/logs/ci-knative-test-infra-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-operator-continuous
  gcs_prefix: knative-prow/logs/ci-knative-serving-operator-continuous
  alert_stale_results_hours: 3
  num_failures_to_alert: 3
- name: ci-knative-serving-operator-nightly-release
  gcs_prefix: knative-prow/logs/ci-knative-serving-operator-nightly-release
- name: ci-knative-serving-operator-dot-release
  gcs_prefix: knative-prow/logs/ci-knative-serving-operator-dot-release
  alert_stale_results_hours: 170
- name: ci-knative-serving-operator-auto-release
  gcs_prefix: knative-prow/logs/ci-knative-serving-operator-auto-release
  alert_stale_results_hours: 3
- name: pull-knative-serving-operator-test-coverage
  gcs_prefix: knative-prow/logs/ci-knative-serving-operator-go-coverage
  num_failures_to_alert: 9999
  short_text_metric: "coverage"
- name: ci-knative-serving-0.4-continuous
  gcs_prefix: knative-prow/logs/ci-knative-serving-0.4-continuous
- name: ci-knative-serving-0.5-continuous
  gcs_prefix: knative-prow/logs/ci-knative-serving-0.5-continuous
- name: ci-knative-build-0.5-continuous
  gcs_prefix: knative-prow/logs/ci-knative-build-0.5-continuous
- name: ci-knative-eventing-0.5-continuous
  gcs_prefix: knative-prow/logs/ci-knative-eventing-0.5-continuous
- name: ci-knative-eventing-contrib-0.5-continuous
  gcs_prefix: knative-prow/logs/ci-knative-eventing-contrib-0.5-continuous
- name: ci-knative-serving-0.6-continuous
  gcs_prefix: knative-prow/logs/ci-knative-serving-0.6-continuous
- name: ci-knative-build-0.6-continuous
  gcs_prefix: knative-prow/logs/ci-knative-build-0.6-continuous
- name: ci-knative-eventing-0.6-continuous
  gcs_prefix: knative-prow/logs/ci-knative-eventing-0.6-continuous
- name: ci-knative-eventing-contrib-0.6-continuous
  gcs_prefix: knative-prow/logs/ci-knative-eventing-contrib-0.6-continuous

dashboards:
- name: serving
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-serving-continuous
    base_options: "sort-by-name="
  - name: conformance
    test_group_name: ci-knative-serving-continuous
    base_options: "include-filter-by-regex=test/conformance/&sort-by-name="
  - name: istio-1.0-mesh
    test_group_name: ci-knative-serving-istio-1.0-mesh
    base_options: "sort-by-name="
  - name: istio-1.0-no-mesh
    test_group_name: ci-knative-serving-istio-1.0-no-mesh
    base_options: "sort-by-name="
  - name: istio-1.1-mesh
    test_group_name: ci-knative-serving-istio-1.1-mesh
    base_options: "sort-by-name="
  - name: istio-1.1-no-mesh
    test_group_name: ci-knative-serving-istio-1.1-no-mesh
    base_options: "sort-by-name="
  - name: istio-1.2-mesh
    test_group_name: ci-knative-serving-istio-1.2-mesh
    base_options: "sort-by-name="
  - name: istio-1.2-no-mesh
    test_group_name: ci-knative-serving-istio-1.2-no-mesh
    base_options: "sort-by-name="
  - name: nightly
    test_group_name: ci-knative-serving-nightly-release
    base_options: "sort-by-name="
  - name: dot-release
    test_group_name: ci-knative-serving-dot-release
    base_options: "sort-by-name="
  - name: auto-release
    test_group_name: ci-knative-serving-auto-release
    base_options: "sort-by-name="
  - name: latency
    test_group_name: ci-knative-serving-latency
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
    description: "95% latency in ms"
  - name: performance
    test_group_name: ci-knative-serving-performance
    base_options: "exclude-filter-by-regex=Overall$&group-by-target=&expand-groups=&sort-by-name="
  - name: performance-mesh
    test_group_name: ci-knative-serving-performance-mesh
    base_options: "exclude-filter-by-regex=Overall$&group-by-target=&expand-groups=&sort-by-name="
  - name: coverage
    test_group_name: pull-knative-serving-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: build
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-build-continuous
    base_options: "sort-by-name="
  - name: nightly
    test_group_name: ci-knative-build-nightly-release
    base_options: "sort-by-name="
  - name: dot-release
    test_group_name: ci-knative-build-dot-release
    base_options: "sort-by-name="
  - name: auto-release
    test_group_name: ci-knative-build-auto-release
    base_options: "sort-by-name="
  - name: latency
    test_group_name: ci-knative-build-latency
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
    description: "95% latency in ms"
  - name: coverage
    test_group_name: pull-knative-build-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: client
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-client-continuous
    base_options: "sort-by-name="
  - name: nightly
    test_group_name: ci-knative-client-nightly-release
    base_options: "sort-by-name="
  - name: dot-release
    test_group_name: ci-knative-client-dot-release
    base_options: "sort-by-name="
  - name: auto-release
    test_group_name: ci-knative-client-auto-release
    base_options: "sort-by-name="
  - name: coverage
    test_group_name: pull-knative-client-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: docs
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-docs-continuous
    base_options: "sort-by-name="
  - name: coverage
    test_group_name: pull-knative-docs-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: eventing
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-eventing-continuous
    base_options: "sort-by-name="
  - name: nightly
    test_group_name: ci-knative-eventing-nightly-release
    base_options: "sort-by-name="
  - name: dot-release
    test_group_name: ci-knative-eventing-dot-release
    base_options: "sort-by-name="
  - name: auto-release
    test_group_name: ci-knative-eventing-auto-release
    base_options: "sort-by-name="
  - name: performance
    test_group_name: ci-knative-eventing-performance
    base_options: "exclude-filter-by-regex=Overall$&group-by-target=&expand-groups=&sort-by-name="
  - name: coverage
    test_group_name: pull-knative-eventing-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: eventing-contrib
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-eventing-contrib-continuous
    base_options: "sort-by-name="
  - name: nightly
    test_group_name: ci-knative-eventing-contrib-nightly-release
    base_options: "sort-by-name="
  - name: dot-release
    test_group_name: ci-knative-eventing-contrib-dot-release
    base_options: "sort-by-name="
  - name: auto-release
    test_group_name: ci-knative-eventing-contrib-auto-release
    base_options: "sort-by-name="
  - name: coverage
    test_group_name: pull-knative-eventing-contrib-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: build-templates
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-build-templates-continuous
    base_options: "sort-by-name="
- name: pkg
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-pkg-continuous
    base_options: "sort-by-name="
  - name: coverage
    test_group_name: pull-knative-pkg-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: caching
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-caching-continuous
    base_options: "sort-by-name="
  - name: coverage
    test_group_name: pull-knative-caching-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="
- name: observability
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-observability-continuous
    base_options: "sort-by-name="
- name: sample-controller
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-sample-controller-continuous
    base_options: "sort-by-name="
- name: test-infra
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-test-infra-continuous
    base_options: "sort-by-name="
- name: serving-operator
  dashboard_tab:
  - name: continuous
    test_group_name: ci-knative-serving-operator-continuous
    base_options: "sort-by-name="
  - name: nightly
    test_group_name: ci-knative-serving-operator-nightly-release
    base_options: "sort-by-name="
  - name: dot-release
    test_group_name: ci-knative-serving-operator-dot-release
    base_options: "sort-by-name="
  - name: auto-release
    test_group_name: ci-knative-serving-operator-auto-release
    base_options: "sort-by-name="
  - name: coverage
    test_group_name: pull-knative-serving-operator-test-coverage
    base_options: "exclude-filter-by-regex=Overall$&group-by-directory=&expand-groups=&sort-by-name="

- name: knative-0.4
  dashboard_tab:
  - name: serving
    test_group_name: ci-knative-serving-0.4-continuous
    base_options: "sort-by-name="
- name: knative-0.5
  dashboard_tab:
  - name: serving
    test_group_name: ci-knative-serving-0.5-continuous
    base_options: "sort-by-name="
  - name: build
    test_group_name: ci-knative-build-0.5-continuous
    base_options: "sort-by-name="
  - name: eventing
    test_group_name: ci-knative-eventing-0.5-continuous
    base_options: "sort-by-name="
  - name: eventing-contrib
    test_group_name: ci-knative-eventing-contrib-0.5-continuous
    base_options: "sort-by-name="
- name: knative-0.6
  dashboard_tab:
  - name: serving
    test_group_name: ci-knative-serving-0.6-continuous
    base_options: "sort-by-name="
  - name: build
    test_group_name: ci-knative-build-0.6-continuous
    base_options: "sort-by-name="
  - name: eventing
    test_group_name: ci-knative-eventing-0.6-continuous
    base_options: "sort-by-name="
  - name: eventing-contrib
    test_group_name: ci-knative-eventing-contrib-0.6-continuous
    base_options: "sort-by-name="
- name: knative-0.7
  dashboard_tab:
  - name: serving
    test_group_name: ci-knative-serving-0.7-continuous
    base_options: "sort-by-name="
  - name: build
    test_group_name: ci-knative-build-0.7-continuous
    base_options: "sort-by-name="
  - name: eventing
    test_group_name: ci-knative-eventing-0.7-continuous
    base_options: "sort-by-name="
  - name: eventing-contrib
    test_group_name: ci-knative-eventing-contrib-0.7-continuous
    base_options: "sort-by-name="
dashboard_groups:
- name: knative
  dashboard_names:
  - "serving"
  - "build"
  - "client"
  - "docs"
  - "eventing"
  - "eventing-contrib"
  - "build-templates"
  - "pkg"
  - "caching"
  - "observability"
  - "sample-controller"
  - "test-infra"
  - "serving-operator"
