<div class="repl-console-wrapper" >
<h1>REPL Console</h1>
<p>Add statements to evaluate.</p>
<p>Do not include sensitive data.</p>

<div class="repl-input-block"
    (keydown)="onEnter($event)">
    <div class="statement-block" *ngFor="let response of lastEvaluate.responses; let i = index">
        <mat-form-field class="statement-container">
            <mat-label>{{i + 1}}</mat-label>
            <input matInput class="repl-stmt-input"
              value="{{lastRequest.commands[i]}}"
              [attr.data-stmt-index]="i"
              (keydown.ArrowUp)="handleUp(i)"
              (keydown.ArrowDown)="handleDown(i)">
            <mat-hint>
                <code class="repl-out-ok">{{response.replOutput || (response.issue? '&lt;err&gt;' : '&lt;ok&gt;' ) | trim:80}}</code>
            </mat-hint>
            <mat-error *ngIf="!!response.issue">
              <code class="repl-out-error">{{response.issue | trim:80}}</code>
            </mat-error>
          </mat-form-field>
          <br>
    </div>

    <div class="statement-block">
      <mat-form-field class="statement-container">
        <mat-label>&gt; </mat-label>
        <input matInput class="repl-stmt-input repl-stmt-new"
        (keydown.ArrowUp)="handleUp(numStatements())"
        (keydown.ArrowDown)="handleDown(numStatements())"
        [attr.data-stmt-index]="lastRequest.commands.length" value="">
      </mat-form-field>
    </div>
</div>
<app-repl-result-detail
[lastResponse]="(numStatements())? lastEvaluate.responses[numStatements() - 1] : undefined"></app-repl-result-detail>
</div>